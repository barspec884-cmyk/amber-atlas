<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>amber atlas reverse — aroma search</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg1:#f8f1e3; --bg2:#f2e3c4; --ink:#3a2e2e; --muted:#7a6b5a; --line:#e8dcc7;
  --accent:#d6a85a; --shadow:0 6px 20px rgba(0,0,0,.08);
}
*{box-sizing:border-box}
body{margin:0;background:linear-gradient(to bottom,var(--bg1),var(--bg2));color:var(--ink);font-family:'Noto Sans JP',system-ui,Roboto,sans-serif;}
header{text-align:center;padding:20px 12px 8px;}
h1{font-family:'Playfair Display',serif;font-size:clamp(22px,5vw,32px);margin:0;}
.sub{color:var(--muted);font-size:14px;margin:4px 0 16px;}
main{max-width:800px;margin:0 auto;padding:0 16px 60px;}
.searchbox{display:flex;gap:10px;align-items:center;justify-content:center;flex-wrap:wrap;margin-bottom:16px;}
input[type=text]{flex:1;min-width:220px;padding:10px 14px;border-radius:10px;border:1px solid var(--line);font-size:15px;}
button{padding:10px 18px;border-radius:10px;border:none;background:var(--accent);color:#2b1a09;font-weight:800;cursor:pointer;box-shadow:var(--shadow);}
button:active{transform:scale(.97);}
#results{display:grid;gap:12px;margin-top:18px;}
.card{border:1px solid var(--line);background:#fff;border-radius:14px;padding:14px 18px;box-shadow:var(--shadow);}
.casklist{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;}
.tag{background:#fff3d6;border:1px solid var(--accent);border-radius:999px;padding:6px 12px;font-size:13px;font-weight:700;}
.lang-toggle{margin-top:10px;text-align:center;}
footer{text-align:center;color:var(--muted);font-size:12px;padding:20px 10px 30px;}
@media (prefers-color-scheme:dark){body{background:radial-gradient(1000px at 50% 8%,#1b1917,#0f0e0d);color:#f5efe6;}input[type=text]{background:#1a1817;color:#f5efe6;border-color:#3a2f24;}button{background:#d6a85a;color:#2b1a09;} .card{background:#171412;border-color:#3a2f24;} .tag{background:#2b2418;border-color:#d6a85a;color:#f5efe6;}}
</style>
</head>
<body>
<header>
  <h1>Amber Atlas — Reverse Search</h1>
  <p class="sub">香り（Aroma）から樽（Cask）を逆引き検索</p>
</header>
<main>
  <div class="searchbox">
    <input type="text" id="searchInput" placeholder="例：vanilla / バニラ" />
    <button id="searchBtn">検索</button>
  </div>
  <div class="lang-toggle">
    <button id="langBtn">🌐 表示：日本語</button>
  </div>
  <div id="results"></div>
</main>
<footer>
  <div>
    <a href="https://cask-atlas.vercel.app/"
       style="color:var(--accent); font-weight:700; text-decoration:none;">
       ← Amber Atlas に戻る
    </a>
  </div>
  © amber palette · amber atlas reverse (v1)
</footer>

<script>
let aromaData={};
let langJP=true;

fetch('amber-atlas-reverse.json')
  .then(r=>r.json())
  .then(json=>{aromaData=json;});

const searchBtn=document.getElementById('searchBtn');
const input=document.getElementById('searchInput');
const results=document.getElementById('results');
const langBtn=document.getElementById('langBtn');

langBtn.addEventListener('click',()=>{
  langJP=!langJP;
  langBtn.textContent=langJP?"🌐 表示：日本語":"🌐 Display: English";
});

searchBtn.addEventListener('click',()=>{
  const q=input.value.trim().toLowerCase();
  results.innerHTML='';
  if(!q){results.innerHTML='<p>🔍 香り名を入力してください。</p>';return;}
  let foundKey=null;
  for(const [en,obj] of Object.entries(aromaData)){
    if(en===q||obj.jp===q||obj.jp.includes(q))foundKey=en;
  }
  if(!foundKey){results.innerHTML='<p>該当する香りが見つかりません。</p>';return;}
  const entry=aromaData[foundKey];
  const title=langJP?entry.jp:foundKey;
  const html=`<div class="card"><h3>${title}</h3><p style="color:var(--muted);margin:6px 0">関連する樽:</p><div class="casklist">${entry.cask.map(c=>`<span class='tag'>${c}</span>`).join('')}</div></div>`;
  results.innerHTML=html;
});

input.addEventListener('keydown',e=>{if(e.key==='Enter')searchBtn.click();});
</script>
</body>
</html>
